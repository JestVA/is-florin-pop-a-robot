<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>ü§ñ Is Florin Pop A Robot? Beep Beep</title>
		<link href="https://fonts.googleapis.com/css?family=Lato:300,400" rel="stylesheet">
		<link href="./style.css" rel="stylesheet">
		<script type="text/javascript" src="./interactive.js"></script>
	</head>

	<body>
		<!-- shiny button that spills out the facts  -->
		<h1>This Button Does Nothing.. or Everything</h1>
		<button class="btn" onclick="withProxyFindAnswer()">I want to know! ü§∑‚Äç‚ôÇÔ∏è</button>
		<div id="answer"></div>
	</body>

	<script type="text/javascript">

		async function withProxyFindAnswer()
		{
			const answerDOMElement = document.getElementById('answer');
			
			resetAnswerDiv(answerDOMElement);
			
			const withProxy = await fetch('/.netlify/functions/proxy-request?yt=true&twitter=true');
			
			const res = await withProxy.json();
			
			if(res.error)
				appendTextNodesToAnswer(answerDOMElement, res.message, true);
		}

		
		// decide how to deal with the inetractive bit
		// appendTextNodesToAnswer(answerDOMElement, whileFetching[consumedAnswers]);





		
		// good when ppl will test this and click the button several times
		// don't want to make a fool of myself haha
		function resetAnswerDiv(element)
		{
			element.innerHTML = "";
		}

		function appendTextNodesToAnswer(node, text, error = false)
		{
			if(error)
				node.innerHTML = "";
			
			const p = document.createElement("p");
			const t = document.createTextNode(text);
			p.appendChild(t);
			node.appendChild(p);
			node.className = "show";
		}
	</script>
</html>
